<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-BR">
<head th:replace="fragments/head :: head"></head>
<body>
<div th:replace="fragments/cabecalho :: cabecalho"></div>

<div class="container mt-4">
    <h2>
        <i class="bi bi-chat-left-text text-primary"></i>
        Comentários da Transação [[${transacao.id}]]
    </h2>
    <p><strong>Descrição:</strong> <span th:text="${transacao.descricao}"></span></p>
    <p><strong>Valor:</strong> <span th:text="${transacao.valor}"></span></p>

    <hr/>

    <form th:action="@{/comentarios/salvar}" method="post" class="mb-3">
        <input type="hidden" name="transacaoId" th:value="${transacao.id}"/>
        <div class="mb-2">
            <textarea name="texto" class="form-control" placeholder="Escreva um comentário..." required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Adicionar Comentário
        </button>
    </form>

    <hr/>

    <ul class="list-group">
        <li th:each="comentario : ${comentarios}" 
            class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <!-- <i class="bi bi-chat-left-text text-secondary"></i> -->
                <span th:text="${comentario.texto}"></span>
            </div>
            <div>
                <form th:action="@{/comentarios/excluir/{id}(id=${comentario.id})}" method="get" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger">
                        <i class="bi bi-trash"></i>
                    </button>
                </form>
            </div>
        </li>
    </ul>

    <div class="mt-3">
        <a th:href="@{/extratos/{id}(id=${transacao.conta.id})}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Voltar ao Extrato
        </a>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</body>
</html>